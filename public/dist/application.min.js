"use strict";var ApplicationConfiguration=function(){var applicationModuleName="philos",applicationModuleVendorDependencies=["ngResource","ngAnimate","ngTouch","ui.router","ui.bootstrap","ui.utils"],registerModule=function(moduleName,dependencies){angular.module(moduleName,dependencies||[]),angular.module(applicationModuleName).requires.push(moduleName)};return{applicationModuleName:applicationModuleName,applicationModuleVendorDependencies:applicationModuleVendorDependencies,registerModule:registerModule}}();angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("!")}]),angular.element(document).ready(function(){"#_=_"===window.location.hash&&(window.location.hash="#!"),angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}),ApplicationConfiguration.registerModule("articles"),ApplicationConfiguration.registerModule("core"),ApplicationConfiguration.registerModule("users"),angular.module("articles").run(["Menus",function(Menus){Menus.addMenuItem("topbar","Articles","articles","dropdown","/articles(/create)?"),Menus.addSubMenuItem("topbar","articles","List Articles","articles"),Menus.addSubMenuItem("topbar","articles","New Article","articles/create")}]),angular.module("articles").config(["$stateProvider",function($stateProvider){$stateProvider.state("listArticles",{url:"/articles",templateUrl:"modules/articles/views/list-articles.client.view.html"}).state("createArticle",{url:"/articles/create",templateUrl:"modules/articles/views/create-article.client.view.html"}).state("viewArticle",{url:"/articles/:articleId",templateUrl:"modules/articles/views/view-article.client.view.html"}).state("editArticle",{url:"/articles/:articleId/edit",templateUrl:"modules/articles/views/edit-article.client.view.html"})}]),angular.module("articles").controller("ArticlesController",["$scope","$stateParams","$location","Authentication","Articles",function($scope,$stateParams,$location,Authentication,Articles){$scope.authentication=Authentication,$scope.create=function(){var article=new Articles({title:this.title,content:this.content});article.$save(function(response){$location.path("articles/"+response._id),$scope.title="",$scope.content=""},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.remove=function(article){if(article){article.$remove();for(var i in $scope.articles)$scope.articles[i]===article&&$scope.articles.splice(i,1)}else $scope.article.$remove(function(){$location.path("articles")})},$scope.update=function(){var article=$scope.article;article.$update(function(){$location.path("articles/"+article._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.articles=Articles.query()},$scope.findOne=function(){$scope.article=Articles.get({articleId:$stateParams.articleId})}}]),angular.module("articles").factory("Articles",["$resource",function($resource){return $resource("articles/:articleId",{articleId:"@_id"},{update:{method:"PUT"}})}]),angular.module("core").config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("home",{url:"/",templateUrl:"modules/core/views/home.client.view.html"})}]),angular.module("core").controller("HeaderController",["$scope","Authentication","Menus",function($scope,Authentication,Menus){$scope.authentication=Authentication,$scope.isCollapsed=!1,$scope.menu=Menus.getMenu("topbar"),$scope.toggleCollapsibleMenu=function(){$scope.isCollapsed=!$scope.isCollapsed},$scope.$on("$stateChangeSuccess",function(){$scope.isCollapsed=!1})}]),angular.module("core").controller("HomeController",["$scope","Authentication",function($scope,Authentication){$scope.authentication=Authentication}]),$(function(){$("a.page-scroll").bind("click",function(event){var $anchor=$(this);$("html, body").stop().animate({scrollTop:$($anchor.attr("href")).offset().top},1500,"easeInOutExpo"),event.preventDefault()})}),$("body").scrollspy({target:".navbar-fixed-top"}),$(".navbar-collapse ul li a").click(function(){$(".navbar-toggle:visible").click()});var cbpAnimatedHeader=function(){function init(){window.addEventListener("scroll",function(){didScroll||(didScroll=!0,setTimeout(scrollPage,250))},!1)}function scrollPage(){var sy=scrollY();sy>=changeHeaderOn?(header=header||document.querySelector(".navbar-default"),classie.add(header,"navbar-shrink")):(header=header||document.querySelector(".navbar-default"),classie.remove(header,"navbar-shrink")),didScroll=!1}function scrollY(){return window.pageYOffset||docElem.scrollTop}var docElem=document.documentElement,header=document.querySelector(".navbar-default"),didScroll=!1,changeHeaderOn=300;init()}(),cbpAnimatedHeader=function(){function f(){window.addEventListener("scroll",function(){e||(e=!0,setTimeout(d,250))},!1)}function d(){var h=c();h>=a?classie.add(g,"cbp-af-header-shrink"):classie.remove(g,"cbp-af-header-shrink"),e=!1}function c(){return window.pageYOffset||b.scrollTop}var b=document.documentElement,g=document.querySelector(".navbar-default"),e=!1,a=300;f()}();!function(window){function classReg(className){return new RegExp("(^|\\s+)"+className+"(\\s+|$)")}function toggleClass(elem,c){var fn=hasClass(elem,c)?removeClass:addClass;fn(elem,c)}var hasClass,addClass,removeClass;"classList"in document.documentElement?(hasClass=function(elem,c){return elem.classList.contains(c)},addClass=function(elem,c){elem.classList.add(c)},removeClass=function(elem,c){elem.classList.remove(c)}):(hasClass=function(elem,c){return classReg(c).test(elem.className)},addClass=function(elem,c){hasClass(elem,c)||(elem.className=elem.className+" "+c)},removeClass=function(elem,c){elem.className=elem.className.replace(classReg(c)," ")});var classie={hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,has:hasClass,add:addClass,remove:removeClass,toggle:toggleClass};"function"==typeof define&&define.amd?define(classie):window.classie=classie}(window),function($){function regexFromString(inputstring){return new RegExp("^"+inputstring+"$")}function executeFunctionByName(functionName,context){for(var args=Array.prototype.slice.call(arguments).splice(2),namespaces=functionName.split("."),func=namespaces.pop(),i=0;i<namespaces.length;i++)context=context[namespaces[i]];return context[func].apply(this,args)}var createdElements=[],defaults={options:{prependExistingHelpBlock:!1,sniffHtml:!0,preventSubmit:!0,submitError:!1,submitSuccess:!1,semanticallyStrict:!1,autoAdd:{helpBlocks:!0},filter:function(){return!0}},methods:{init:function(options){var settings=$.extend(!0,{},defaults);settings.options=$.extend(!0,settings.options,options);var $siblingElements=this,uniqueForms=$.unique($siblingElements.map(function(){return $(this).parents("form")[0]}).toArray());return $(uniqueForms).bind("submit",function(e){var $form=$(this),warningsFound=0,$inputs=$form.find("input,textarea,select").not("[type=submit],[type=image]").filter(settings.options.filter);$inputs.trigger("submit.validation").trigger("validationLostFocus.validation"),$inputs.each(function(i,el){var $this=$(el),$controlGroup=$this.parents(".form-group").first();$controlGroup.hasClass("warning")&&($controlGroup.removeClass("warning").addClass("error"),warningsFound++)}),$inputs.trigger("validationLostFocus.validation"),warningsFound?(settings.options.preventSubmit&&e.preventDefault(),$form.addClass("error"),$.isFunction(settings.options.submitError)&&settings.options.submitError($form,e,$inputs.jqBootstrapValidation("collectErrors",!0))):($form.removeClass("error"),$.isFunction(settings.options.submitSuccess)&&settings.options.submitSuccess($form,e))}),this.each(function(){var $this=$(this),$controlGroup=$this.parents(".form-group").first(),$helpBlock=$controlGroup.find(".help-block").first(),$form=$this.parents("form").first(),validatorNames=[];if(!$helpBlock.length&&settings.options.autoAdd&&settings.options.autoAdd.helpBlocks&&($helpBlock=$('<div class="help-block" />'),$controlGroup.find(".controls").append($helpBlock),createdElements.push($helpBlock[0])),settings.options.sniffHtml){var message="";if(void 0!==$this.attr("pattern")&&(message="Not in the expected format<!-- data-validation-pattern-message to override -->",$this.data("validationPatternMessage")&&(message=$this.data("validationPatternMessage")),$this.data("validationPatternMessage",message),$this.data("validationPatternRegex",$this.attr("pattern"))),void 0!==$this.attr("max")||void 0!==$this.attr("aria-valuemax")){var max=$this.attr(void 0!==$this.attr("max")?"max":"aria-valuemax");message="Too high: Maximum of '"+max+"'<!-- data-validation-max-message to override -->",$this.data("validationMaxMessage")&&(message=$this.data("validationMaxMessage")),$this.data("validationMaxMessage",message),$this.data("validationMaxMax",max)}if(void 0!==$this.attr("min")||void 0!==$this.attr("aria-valuemin")){var min=$this.attr(void 0!==$this.attr("min")?"min":"aria-valuemin");message="Too low: Minimum of '"+min+"'<!-- data-validation-min-message to override -->",$this.data("validationMinMessage")&&(message=$this.data("validationMinMessage")),$this.data("validationMinMessage",message),$this.data("validationMinMin",min)}void 0!==$this.attr("maxlength")&&(message="Too long: Maximum of '"+$this.attr("maxlength")+"' characters<!-- data-validation-maxlength-message to override -->",$this.data("validationMaxlengthMessage")&&(message=$this.data("validationMaxlengthMessage")),$this.data("validationMaxlengthMessage",message),$this.data("validationMaxlengthMaxlength",$this.attr("maxlength"))),void 0!==$this.attr("minlength")&&(message="Too short: Minimum of '"+$this.attr("minlength")+"' characters<!-- data-validation-minlength-message to override -->",$this.data("validationMinlengthMessage")&&(message=$this.data("validationMinlengthMessage")),$this.data("validationMinlengthMessage",message),$this.data("validationMinlengthMinlength",$this.attr("minlength"))),(void 0!==$this.attr("required")||void 0!==$this.attr("aria-required"))&&(message=settings.builtInValidators.required.message,$this.data("validationRequiredMessage")&&(message=$this.data("validationRequiredMessage")),$this.data("validationRequiredMessage",message)),void 0!==$this.attr("type")&&"number"===$this.attr("type").toLowerCase()&&(message=settings.builtInValidators.number.message,$this.data("validationNumberMessage")&&(message=$this.data("validationNumberMessage")),$this.data("validationNumberMessage",message)),void 0!==$this.attr("type")&&"email"===$this.attr("type").toLowerCase()&&(message="Not a valid email address<!-- data-validator-validemail-message to override -->",$this.data("validationValidemailMessage")?message=$this.data("validationValidemailMessage"):$this.data("validationEmailMessage")&&(message=$this.data("validationEmailMessage")),$this.data("validationValidemailMessage",message)),void 0!==$this.attr("minchecked")&&(message="Not enough options checked; Minimum of '"+$this.attr("minchecked")+"' required<!-- data-validation-minchecked-message to override -->",$this.data("validationMincheckedMessage")&&(message=$this.data("validationMincheckedMessage")),$this.data("validationMincheckedMessage",message),$this.data("validationMincheckedMinchecked",$this.attr("minchecked"))),void 0!==$this.attr("maxchecked")&&(message="Too many options checked; Maximum of '"+$this.attr("maxchecked")+"' required<!-- data-validation-maxchecked-message to override -->",$this.data("validationMaxcheckedMessage")&&(message=$this.data("validationMaxcheckedMessage")),$this.data("validationMaxcheckedMessage",message),$this.data("validationMaxcheckedMaxchecked",$this.attr("maxchecked")))}void 0!==$this.data("validation")&&(validatorNames=$this.data("validation").split(",")),$.each($this.data(),function(i){var parts=i.replace(/([A-Z])/g,",$1").split(",");"validation"===parts[0]&&parts[1]&&validatorNames.push(parts[1])});var validatorNamesToInspect=validatorNames,newValidatorNamesToInspect=[];do $.each(validatorNames,function(i,el){validatorNames[i]=formatValidatorName(el)}),validatorNames=$.unique(validatorNames),newValidatorNamesToInspect=[],$.each(validatorNamesToInspect,function(i,el){if(void 0!==$this.data("validation"+el+"Shortcut"))$.each($this.data("validation"+el+"Shortcut").split(","),function(i2,el2){newValidatorNamesToInspect.push(el2)});else if(settings.builtInValidators[el.toLowerCase()]){var validator=settings.builtInValidators[el.toLowerCase()];"shortcut"===validator.type.toLowerCase()&&$.each(validator.shortcut.split(","),function(i,el){el=formatValidatorName(el),newValidatorNamesToInspect.push(el),validatorNames.push(el)})}}),validatorNamesToInspect=newValidatorNamesToInspect;while(validatorNamesToInspect.length>0);var validators={};$.each(validatorNames,function(i,el){var message=$this.data("validation"+el+"Message"),hasOverrideMessage=void 0!==message,foundValidator=!1;if(message=message?message:"'"+el+"' validation failed <!-- Add attribute 'data-validation-"+el.toLowerCase()+"-message' to input to change this message -->",$.each(settings.validatorTypes,function(validatorType,validatorTemplate){void 0===validators[validatorType]&&(validators[validatorType]=[]),foundValidator||void 0===$this.data("validation"+el+formatValidatorName(validatorTemplate.name))||(validators[validatorType].push($.extend(!0,{name:formatValidatorName(validatorTemplate.name),message:message},validatorTemplate.init($this,el))),foundValidator=!0)}),!foundValidator&&settings.builtInValidators[el.toLowerCase()]){var validator=$.extend(!0,{},settings.builtInValidators[el.toLowerCase()]);hasOverrideMessage&&(validator.message=message);var validatorType=validator.type.toLowerCase();"shortcut"===validatorType?foundValidator=!0:$.each(settings.validatorTypes,function(validatorTemplateType,validatorTemplate){void 0===validators[validatorTemplateType]&&(validators[validatorTemplateType]=[]),foundValidator||validatorType!==validatorTemplateType.toLowerCase()||($this.data("validation"+el+formatValidatorName(validatorTemplate.name),validator[validatorTemplate.name.toLowerCase()]),validators[validatorType].push($.extend(validator,validatorTemplate.init($this,el))),foundValidator=!0)})}foundValidator||$.error("Cannot find validation info for '"+el+"'")}),$helpBlock.data("original-contents",$helpBlock.data("original-contents")?$helpBlock.data("original-contents"):$helpBlock.html()),$helpBlock.data("original-role",$helpBlock.data("original-role")?$helpBlock.data("original-role"):$helpBlock.attr("role")),$controlGroup.data("original-classes",$controlGroup.data("original-clases")?$controlGroup.data("original-classes"):$controlGroup.attr("class")),$this.data("original-aria-invalid",$this.data("original-aria-invalid")?$this.data("original-aria-invalid"):$this.attr("aria-invalid")),$this.bind("validation.validation",function(event,params){var value=getValue($this),errorsFound=[];return $.each(validators,function(validatorType,validatorTypeArray){(value||value.length||params&&params.includeEmpty||settings.validatorTypes[validatorType].blockSubmit&&params&&params.submitting)&&$.each(validatorTypeArray,function(i,validator){settings.validatorTypes[validatorType].validate($this,value,validator)&&errorsFound.push(validator.message)})}),errorsFound}),$this.bind("getValidators.validation",function(){return validators}),$this.bind("submit.validation",function(){return $this.triggerHandler("change.validation",{submitting:!0})}),$this.bind(["keyup","focus","blur","click","keydown","keypress","change"].join(".validation ")+".validation",function(e,params){var value=getValue($this),errorsFound=[];$controlGroup.find("input,textarea,select").each(function(i,el){var oldCount=errorsFound.length;if($.each($(el).triggerHandler("validation.validation",params),function(j,message){errorsFound.push(message)}),errorsFound.length>oldCount)$(el).attr("aria-invalid","true");else{var original=$this.data("original-aria-invalid");$(el).attr("aria-invalid",void 0!==original?original:!1)}}),$form.find("input,select,textarea").not($this).not('[name="'+$this.attr("name")+'"]').trigger("validationLostFocus.validation"),errorsFound=$.unique(errorsFound.sort()),errorsFound.length?($controlGroup.removeClass("success error").addClass("warning"),$helpBlock.html(settings.options.semanticallyStrict&&1===errorsFound.length?errorsFound[0]+(settings.options.prependExistingHelpBlock?$helpBlock.data("original-contents"):""):'<ul role="alert"><li>'+errorsFound.join("</li><li>")+"</li></ul>"+(settings.options.prependExistingHelpBlock?$helpBlock.data("original-contents"):""))):($controlGroup.removeClass("warning error success"),value.length>0&&$controlGroup.addClass("success"),$helpBlock.html($helpBlock.data("original-contents"))),"blur"===e.type&&$controlGroup.removeClass("success")}),$this.bind("validationLostFocus.validation",function(){$controlGroup.removeClass("success")})})},destroy:function(){return this.each(function(){var $this=$(this),$controlGroup=$this.parents(".form-group").first(),$helpBlock=$controlGroup.find(".help-block").first();$this.unbind(".validation"),$helpBlock.html($helpBlock.data("original-contents")),$controlGroup.attr("class",$controlGroup.data("original-classes")),$this.attr("aria-invalid",$this.data("original-aria-invalid")),$helpBlock.attr("role",$this.data("original-role")),createdElements.indexOf($helpBlock[0])>-1&&$helpBlock.remove()})},collectErrors:function(){var errorMessages={};return this.each(function(i,el){var $el=$(el),name=$el.attr("name"),errors=$el.triggerHandler("validation.validation",{includeEmpty:!0});errorMessages[name]=$.extend(!0,errors,errorMessages[name])}),$.each(errorMessages,function(i,el){0===el.length&&delete errorMessages[i]}),errorMessages},hasErrors:function(){var errorMessages=[];return this.each(function(i,el){errorMessages=errorMessages.concat($(el).triggerHandler("getValidators.validation")?$(el).triggerHandler("validation.validation",{submitting:!0}):[])}),errorMessages.length>0},override:function(newDefaults){defaults=$.extend(!0,defaults,newDefaults)}},validatorTypes:{callback:{name:"callback",init:function($this,name){return{validatorName:name,callback:$this.data("validation"+name+"Callback"),lastValue:$this.val(),lastValid:!0,lastFinished:!0}},validate:function($this,value,validator){if(validator.lastValue===value&&validator.lastFinished)return!validator.lastValid;if(validator.lastFinished===!0){validator.lastValue=value,validator.lastValid=!0,validator.lastFinished=!1;var rrjqbvValidator=validator,rrjqbvThis=$this;executeFunctionByName(validator.callback,window,$this,value,function(data){rrjqbvValidator.lastValue===data.value&&(rrjqbvValidator.lastValid=data.valid,data.message&&(rrjqbvValidator.message=data.message),rrjqbvValidator.lastFinished=!0,rrjqbvThis.data("validation"+rrjqbvValidator.validatorName+"Message",rrjqbvValidator.message),setTimeout(function(){rrjqbvThis.trigger("change.validation")},1))})}return!1}},ajax:{name:"ajax",init:function($this,name){return{validatorName:name,url:$this.data("validation"+name+"Ajax"),lastValue:$this.val(),lastValid:!0,lastFinished:!0}},validate:function($this,value,validator){return""+validator.lastValue==""+value&&validator.lastFinished===!0?validator.lastValid===!1:(validator.lastFinished===!0&&(validator.lastValue=value,validator.lastValid=!0,validator.lastFinished=!1,$.ajax({url:validator.url,data:"value="+value+"&field="+$this.attr("name"),dataType:"json",success:function(data){""+validator.lastValue==""+data.value&&(validator.lastValid=!!data.valid,data.message&&(validator.message=data.message),validator.lastFinished=!0,$this.data("validation"+validator.validatorName+"Message",validator.message),setTimeout(function(){$this.trigger("change.validation")},1))},failure:function(){validator.lastValid=!0,validator.message="ajax call failed",validator.lastFinished=!0,$this.data("validation"+validator.validatorName+"Message",validator.message),setTimeout(function(){$this.trigger("change.validation")},1)}})),!1)}},regex:{name:"regex",init:function($this,name){return{regex:regexFromString($this.data("validation"+name+"Regex"))}},validate:function($this,value,validator){return!validator.regex.test(value)&&!validator.negative||validator.regex.test(value)&&validator.negative}},required:{name:"required",init:function(){return{}},validate:function($this,value,validator){return!(0!==value.length||validator.negative)||!!(value.length>0&&validator.negative)},blockSubmit:!0},match:{name:"match",init:function($this,name){var element=$this.parents("form").first().find('[name="'+$this.data("validation"+name+"Match")+'"]').first();return element.bind("validation.validation",function(){$this.trigger("change.validation",{submitting:!0})}),{element:element}},validate:function($this,value,validator){return value!==validator.element.val()&&!validator.negative||value===validator.element.val()&&validator.negative},blockSubmit:!0},max:{name:"max",init:function($this,name){return{max:$this.data("validation"+name+"Max")}},validate:function($this,value,validator){return parseFloat(value,10)>parseFloat(validator.max,10)&&!validator.negative||parseFloat(value,10)<=parseFloat(validator.max,10)&&validator.negative}},min:{name:"min",init:function($this,name){return{min:$this.data("validation"+name+"Min")}},validate:function($this,value,validator){return parseFloat(value)<parseFloat(validator.min)&&!validator.negative||parseFloat(value)>=parseFloat(validator.min)&&validator.negative}},maxlength:{name:"maxlength",init:function($this,name){return{maxlength:$this.data("validation"+name+"Maxlength")}},validate:function($this,value,validator){return value.length>validator.maxlength&&!validator.negative||value.length<=validator.maxlength&&validator.negative}},minlength:{name:"minlength",init:function($this,name){return{minlength:$this.data("validation"+name+"Minlength")}},validate:function($this,value,validator){return value.length<validator.minlength&&!validator.negative||value.length>=validator.minlength&&validator.negative}},maxchecked:{name:"maxchecked",init:function($this,name){var elements=$this.parents("form").first().find('[name="'+$this.attr("name")+'"]');return elements.bind("click.validation",function(){$this.trigger("change.validation",{includeEmpty:!0})}),{maxchecked:$this.data("validation"+name+"Maxchecked"),elements:elements}},validate:function($this,value,validator){return validator.elements.filter(":checked").length>validator.maxchecked&&!validator.negative||validator.elements.filter(":checked").length<=validator.maxchecked&&validator.negative},blockSubmit:!0},minchecked:{name:"minchecked",init:function($this,name){var elements=$this.parents("form").first().find('[name="'+$this.attr("name")+'"]');return elements.bind("click.validation",function(){$this.trigger("change.validation",{includeEmpty:!0})}),{minchecked:$this.data("validation"+name+"Minchecked"),elements:elements}},validate:function($this,value,validator){return validator.elements.filter(":checked").length<validator.minchecked&&!validator.negative||validator.elements.filter(":checked").length>=validator.minchecked&&validator.negative},blockSubmit:!0}},builtInValidators:{email:{name:"Email",type:"shortcut",shortcut:"validemail"},validemail:{name:"Validemail",type:"regex",regex:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}",message:"Not a valid email address<!-- data-validator-validemail-message to override -->"},passwordagain:{name:"Passwordagain",type:"match",match:"password",message:"Does not match the given password<!-- data-validator-paswordagain-message to override -->"},positive:{name:"Positive",type:"shortcut",shortcut:"number,positivenumber"},negative:{name:"Negative",type:"shortcut",shortcut:"number,negativenumber"},number:{name:"Number",type:"regex",regex:"([+-]?\\d+(\\.\\d*)?([eE][+-]?[0-9]+)?)?",message:"Must be a number<!-- data-validator-number-message to override -->"},integer:{name:"Integer",type:"regex",regex:"[+-]?\\d+",message:"No decimal places allowed<!-- data-validator-integer-message to override -->"},positivenumber:{name:"Positivenumber",type:"min",min:0,message:"Must be a positive number<!-- data-validator-positivenumber-message to override -->"},negativenumber:{name:"Negativenumber",type:"max",max:0,message:"Must be a negative number<!-- data-validator-negativenumber-message to override -->"},required:{name:"Required",type:"required",message:"This is required<!-- data-validator-required-message to override -->"},checkone:{name:"Checkone",type:"minchecked",minchecked:1,message:"Check at least one option<!-- data-validation-checkone-message to override -->"}}},formatValidatorName=function(name){return name.toLowerCase().replace(/(^|\s)([a-z])/g,function(m,p1,p2){return p1+p2.toUpperCase()})},getValue=function($this){var value=$this.val(),type=$this.attr("type");return"checkbox"===type&&(value=$this.is(":checked")?value:""),"radio"===type&&(value=$('input[name="'+$this.attr("name")+'"]:checked').length>0?value:""),value};$.fn.jqBootstrapValidation=function(method){return defaults.methods[method]?defaults.methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?($.error("Method "+method+" does not exist on jQuery.jqBootstrapValidation"),null):defaults.methods.init.apply(this,arguments)},$.jqBootstrapValidation=function(){$(":input").not("[type=image],[type=submit]").jqBootstrapValidation.apply(this,arguments)}}(jQuery),angular.module("core").service("Menus",[function(){this.defaultRoles=["*"],this.menus={};var shouldRender=function(user){if(!user)return this.isPublic;if(~this.roles.indexOf("*"))return!0;for(var userRoleIndex in user.roles)for(var roleIndex in this.roles)if(this.roles[roleIndex]===user.roles[userRoleIndex])return!0;return!1};this.validateMenuExistance=function(menuId){if(menuId&&menuId.length){if(this.menus[menuId])return!0;throw new Error("Menu does not exists")}throw new Error("MenuId was not provided")},this.getMenu=function(menuId){return this.validateMenuExistance(menuId),this.menus[menuId]},this.addMenu=function(menuId,isPublic,roles){return this.menus[menuId]={isPublic:isPublic||!1,roles:roles||this.defaultRoles,items:[],shouldRender:shouldRender},this.menus[menuId]},this.removeMenu=function(menuId){this.validateMenuExistance(menuId),delete this.menus[menuId]},this.addMenuItem=function(menuId,menuItemTitle,menuItemURL,menuItemType,menuItemUIRoute,isPublic,roles,position){return this.validateMenuExistance(menuId),this.menus[menuId].items.push({title:menuItemTitle,link:menuItemURL,menuItemType:menuItemType||"item",menuItemClass:menuItemType,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].roles:roles,position:position||0,items:[],shouldRender:shouldRender}),this.menus[menuId]},this.addSubMenuItem=function(menuId,rootMenuItemURL,menuItemTitle,menuItemURL,menuItemUIRoute,isPublic,roles,position){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===rootMenuItemURL&&this.menus[menuId].items[itemIndex].items.push({title:menuItemTitle,link:menuItemURL,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].items[itemIndex].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].items[itemIndex].roles:roles,position:position||0,shouldRender:shouldRender});return this.menus[menuId]},this.removeMenuItem=function(menuId,menuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===menuItemURL&&this.menus[menuId].items.splice(itemIndex,1);return this.menus[menuId]},this.removeSubMenuItem=function(menuId,submenuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)for(var subitemIndex in this.menus[menuId].items[itemIndex].items)this.menus[menuId].items[itemIndex].items[subitemIndex].link===submenuItemURL&&this.menus[menuId].items[itemIndex].items.splice(subitemIndex,1);return this.menus[menuId]},this.addMenu("topbar")}]),angular.module("users").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$q","$location","Authentication",function($q,$location,Authentication){return{responseError:function(rejection){switch(rejection.status){case 401:Authentication.user=null,$location.path("signin");break;case 403:}return $q.reject(rejection)}}}])}]),angular.module("users").config(["$stateProvider",function($stateProvider){$stateProvider.state("profile",{url:"/settings/profile",templateUrl:"modules/users/views/settings/edit-profile.client.view.html"}).state("password",{url:"/settings/password",templateUrl:"modules/users/views/settings/change-password.client.view.html"}).state("accounts",{url:"/settings/accounts",templateUrl:"modules/users/views/settings/social-accounts.client.view.html"}).state("signup",{url:"/signup",templateUrl:"modules/users/views/authentication/signup.client.view.html"}).state("signin",{url:"/signin",templateUrl:"modules/users/views/authentication/signin.client.view.html"}).state("forgot",{url:"/password/forgot",templateUrl:"modules/users/views/password/forgot-password.client.view.html"}).state("reset-invalid",{url:"/password/reset/invalid",templateUrl:"modules/users/views/password/reset-password-invalid.client.view.html"}).state("reset-success",{url:"/password/reset/success",templateUrl:"modules/users/views/password/reset-password-success.client.view.html"}).state("reset",{url:"/password/reset/:token",templateUrl:"modules/users/views/password/reset-password.client.view.html"})}]),angular.module("users").controller("AuthenticationController",["$scope","$http","$location","Authentication",function($scope,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.signup=function(){$http.post("/auth/signup",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})},$scope.signin=function(){$http.post("/auth/signin",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","Authentication",function($scope,$stateParams,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.askForPasswordReset=function(){$scope.success=$scope.error=null,$http.post("/auth/forgot",$scope.credentials).success(function(response){$scope.credentials=null,$scope.success=response.message}).error(function(response){$scope.credentials=null,$scope.error=response.message})},$scope.resetUserPassword=function(){$scope.success=$scope.error=null,$http.post("/auth/reset/"+$stateParams.token,$scope.passwordDetails).success(function(response){$scope.passwordDetails=null,Authentication.user=response,$location.path("/password/reset/success")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("SettingsController",["$scope","$http","$location","Users","Authentication",function($scope,$http,$location,Users,Authentication){$scope.user=Authentication.user,$scope.user||$location.path("/"),$scope.hasConnectedAdditionalSocialAccounts=function(){for(var i in $scope.user.additionalProvidersData)return!0;return!1},$scope.isConnectedSocialAccount=function(provider){return $scope.user.provider===provider||$scope.user.additionalProvidersData&&$scope.user.additionalProvidersData[provider]},$scope.removeUserSocialAccount=function(provider){$scope.success=$scope.error=null,$http["delete"]("/users/accounts",{params:{provider:provider}}).success(function(response){$scope.success=!0,$scope.user=Authentication.user=response
}).error(function(response){$scope.error=response.message})},$scope.updateUserProfile=function(isValid){if(isValid){$scope.success=$scope.error=null;var user=new Users($scope.user);user.$update(function(response){$scope.success=!0,Authentication.user=response},function(response){$scope.error=response.data.message})}else $scope.submitted=!0},$scope.changeUserPassword=function(){$scope.success=$scope.error=null,$http.post("/users/password",$scope.passwordDetails).success(function(){$scope.success=!0,$scope.passwordDetails=null}).error(function(response){$scope.error=response.message})}}]),angular.module("users").factory("Authentication",[function(){var _this=this;return _this._data={user:window.user},_this._data}]),angular.module("users").factory("Users",["$resource",function($resource){return $resource("users",{},{update:{method:"PUT"}})}]);